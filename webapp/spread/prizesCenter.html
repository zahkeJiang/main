<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<title>奖品中心</title>
	<link href="../css/base.css" rel="stylesheet" type="text/css"/>
</head>

<style type="text/css">
body{
  background-color: #4ea0ff;
  color: #999;
}
.divBox{
  border-radius: 10px;
  padding: 0 10px;
  margin: 10px 16px;
  background-color: #f6f1f1;
}
.divBox h2{
  color: #777;
  height: 40px;
  line-height: 40px;
  text-align: center;
  border-bottom: 1px solid #ddd;
}
.goldDiv{
  padding: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.goldDiv>div{
  text-align: center;
  width: 76px;
}
.gold img{
  height: 32px;
  width: 32px;

}
.goldDiv p.spread-gold,.goldDiv p.normal-gold{
  color: #999;
  margin: 4px 0;
  font-weight: bold;
}
.goldDiv>div p:last-child{
  color: #ff7800;
  font-size: 12px;
}
.prizes{
  border-radius: 50px;
  padding: 4px;
  font-size: 14px;
  background-color: #4ea0ff;
  color: #fff;
}
/*兑换中心*/
.duihuan-header{
  padding:10px 0;
  display: flex;
  align-items: center;
}
.duihuan-content{
  display: flex;
  padding: 10px;
  position: relative;
  border-bottom: 1px solid #ddd;
}
.duihuan-content:last-child{
  border-bottom: 0;
}

.duihuan-content-hint-xianshi{
  position: absolute;
  top: 0;
  right: 0;
  background-color: #37c910;
  color: #fff;
  font-size: 12px;
  line-height: 22px;
  text-align: center;
  height: 24px;
  width: 56px;

  /*锯齿*/
  background-image:-webkit-gradient(linear,50% 0,0 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#f6f1f1),to(#f6f1f1)),
                    -webkit-gradient(linear,50% 0,100% 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#f6f1f1),to(#f6f1f1));
  background-image:-moz-linear-gradient(50% 0 -45deg,transparent,transparent 50%,#f6f1f1 50%,#f6f1f1),
                    -moz-linear-gradient(50% 0 -135deg,transparent,transparent 50%,#f6f1f1 50%,#f6f1f1);                                
  background-size:6px 3px;
  background-repeat:repeat-x;
  background-position:0 100%;              
}
.duihuan-content-hint-xinpin{
  position: absolute;
  top: 0;
  right: 0;
  background-color: #ff9000;
  color: #fff;
  font-size: 12px;
  line-height: 22px;
  text-align: center;
  height: 24px;
  width: 56px;

  /*锯齿*/
  background-image:-webkit-gradient(linear,50% 0,0 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#f6f1f1),to(#f6f1f1)),
                    -webkit-gradient(linear,50% 0,100% 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#f6f1f1),to(#f6f1f1));
  background-image:-moz-linear-gradient(50% 0 -45deg,transparent,transparent 50%,#f6f1f1 50%,#f6f1f1),
                    -moz-linear-gradient(50% 0 -135deg,transparent,transparent 50%,#f6f1f1 50%,#f6f1f1);                                
  background-size:6px 3px;
  background-repeat:repeat-x;
  background-position:0 100%;              
}
.duihuan-content-hint-youhui{
  position: absolute;
  top: 0;
  right: 0;
  background-color: #ff564e;
  color: #fff;
  font-size: 12px;
  line-height: 22px;
  text-align: center;
  height: 24px;
  width: 56px;

  /*锯齿*/
  background-image:-webkit-gradient(linear,50% 0,0 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#e5e5e5),to(#e5e5e5)),
                    -webkit-gradient(linear,50% 0,100% 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#e5e5e5),to(#e5e5e5));
  background-image:-moz-linear-gradient(50% 0 -45deg,transparent,transparent 50%,#e5e5e5 50%,#e5e5e5),
                    -moz-linear-gradient(50% 0 -135deg,transparent,transparent 50%,#e5e5e5 50%,#e5e5e5);                                
  background-size:6px 3px;
  background-repeat:repeat-x;
  background-position:0 100%;              
}
.duihuan-content-hint-yiduiwan{
  position: absolute;
  top: 0;
  right: 0;
  background-color: #b4b4b4;
  color: #fff;
  font-size: 12px;
  line-height: 22px;
  text-align: center;
  height: 24px;
  width: 56px;

  /*锯齿*/
  background-image:-webkit-gradient(linear,50% 0,0 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#e5e5e5),to(#e5e5e5)),
                    -webkit-gradient(linear,50% 0,100% 100%,from(transparent), color-stop(.5,transparent),color-stop(.5,#e5e5e5),to(#e5e5e5));
  background-image:-moz-linear-gradient(50% 0 -45deg,transparent,transparent 50%,#e5e5e5 50%,#e5e5e5),
                    -moz-linear-gradient(50% 0 -135deg,transparent,transparent 50%,#e5e5e5 50%,#e5e5e5);                                
  background-size:6px 3px;
  background-repeat:repeat-x;
  background-position:0 100%;              
}
.duihuan-content-text{
  margin-left: 20px;
  flex: 1
}
.duihuan-content-text p.name{
  line-height: 40px;
  color: #777
}
.duihuan-money{
  line-height: 20px;
}
.duihuan-content-text p.shengyu{
  line-height: 20px;
  float: right;
}
</style>
<body>
  <div class="info divBox">
    <h2>我的积分</h2>
    <div class="goldDiv">
      <div class="gold">
        <img src="../images/spreadWChat/spreadGold.png">
        <p class="spread-gold">0</p>
        <p>推广币</p>
      </div>
      <div class="gold">
        <img src="../images/spreadWChat/normalGold.png">
        <p class="normal-gold">0</p>
        <p>普通币</p>
      </div>
      <div class="prizes">兑换详情</div>
    </div>
  </div>
  <div class="duihuan divBox">
    <h2>兑换专区</h2>
    <div class="duihuan-list">
      <!-- <div class="duihuan-content">
        <img src="../images/close.png" height="80px" width="80px">
        <div class="duihuan-content-hint-xinpin">限时</div>
        <div class="duihuan-content-text">
          <p class="name">名称</p>
          <div class="duihuan-money">
            <span>0</span>
            <img src="../images/spreadWChat/spreadGold.png" height="20px">
            <span>0</span>
            <img src="../images/spreadWChat/normalGold.png" height="20px">
          </div>
          <p class="shengyu">剩余：2</p>
        </div>
      </div> -->
    </div>
  </div>
</body>
<script type="text/javascript" src="../js/jquery-3.2.1.min.js"></script>
<script src="../jsPlug/bootstrap.min.js"></script>
<script src="../js/jquery.cookie.js" type="text/javascript"></script>
<script src="../js/isWeiXin.js"></script>
<script src="../js/modal.js"></script>
<script src="../iconjs/iconfont.js"></script>

<script>
  $(function(){
              
    getUserCoin();//获取用户推广币和普通币
    getAwards(0);//获取奖品兑换列表
    
    $(".duihuan-content").click(function(){
      var awardId = $(this).attr("awardId");
      window.location.href="prizesInfo.html?awardId="+awardId;
    });
    $(".prizes").click(function(){
  //     if(typeof(WeixinJSBridge)!="undefined"){  
    WeixinJSBridge.call('closeWindow');  
  // }else{  
  //   if (navigator.userAgent.indexOf("MSIE") > 0) {    
  //     if (navigator.userAgent.indexOf("MSIE 6.0") > 0) {    
  //       window.opener = null; window.close();    
  //     } else {    
  //       window.open('', '_top'); window.top.close();    
  //     }    
  //   } else if (navigator.userAgent.indexOf("Firefox") > 0) {    
  //     window.location.href = 'about:blank ';    
  //     //window.history.go(-2);    
  //   } else {    
  //     window.opener = null;     
  //     window.open('', '_self', '');    
  //     window.close();    
  //   }  
  // }  
  });
  });

  //获取用户推广币和普通币
  function getUserCoin(){
    $.post("getUserCoin",{},function(datas){
      if (datas.status == 0) {
        $(".spread-gold").html(datas.data.userCoin.coin);
        $(".normal-gold").html(datas.data.userCoin.generalCoin);
      }
    },"json");
  }
  //获取奖品兑换列表
  function getAwards(filter){
    $.post("getAwards",{"filter":filter},function(datas){
      if (datas.status == 0) {
        var awardsList = datas.awards;
        var awardsListHtml = "";
        $.each(awardsList,function(index,comment){
          if (comment.status==0) {
            var duihuanStatus = '';
          }else if (comment.status==1) {
            var duihuanStatus = '<div class="duihuan-content-hint-xianshi">限时</div>';
          }if (comment.status==2) {
            var duihuanStatus = '<div class="duihuan-content-hint-youhui">优惠</div>';
          }if (comment.status==3) {
            var duihuanStatus = '<div class="duihuan-content-hint-yiduiwan">已兑完</div>';
          }if (comment.status==4) {
            var duihuanStatus = '<div class="duihuan-content-hint-xinpin">新品</div>';
          }
          awardsListHtml += '<div class="duihuan-content" awardId="'+comment.awardId+'">'
                              +'<img src="'+comment.image+'" height="80px" width="80px">'
                              +duihuanStatus
                              +'<div class="duihuan-content-text">'
                                +'<p class="'+comment.awardName+'">名称</p>'
                                +'<div class="duihuan-money">'
                                  +'<span>'+comment.coin+'</span>'
                                  +'<img src="../images/spreadWChat/spreadGold.png" height="20px">'
                                  +'<span>'+comment.generalCoin+'</span>'
                                  +'<img src="../images/spreadWChat/normalGold.png" height="20px">'
                                +'</div>'
                                +'<p class="shengyu">剩余：'+comment.amount+'</p>'
                              +'</div>'
                            +'</div>'
        });
      }
      $(".duihuan-list").html(awardsListHtml);
    },"json");
  }
</script>


</html>